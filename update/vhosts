#!/bin/bash
###############################################
##  tahioN - IRC Shell Matrix                ##
##  (c) kofany & yooz                        ##
###############################################

# Cyberpunk color scheme
CYAN='\033[0;36m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
RED='\033[0;31m'
GRAY='\033[0;90m'
NC='\033[0m'

# Cyberpunk prompt
PRM="${CYAN}║${NC} ${YELLOW}⚡${NC} "

# Get external IPs
ipv4_addresses=$(ip -4 addr show | grep 'inet ' | awk '{print $2}' | cut -d/ -f1 | grep -vE '^127\..*|^10\..*|^172\.(1[6-9]|2[0-9]|3[0-1])\..*|^192\.168\..*')
ipv6_addresses=$(ip -6 addr show | grep 'inet6 ' | awk '{print $2}' | cut -d/ -f1 | grep -vE '^::1|^fe80.*|^fd.*|^fc.*')

# Function to get reverse DNS
get_reverse_dns() {
    rev_dns=$(host -W 1 "$1" | awk '/pointer/ {print $5}')
    if [ -z "$rev_dns" ]; then
        echo -e "${GRAY}no reverse DNS${NC}"
    else
        echo -e "${CYAN}$rev_dns${NC}"
    fi
}

# Display vhosts
echo -e "${CYAN}╔═══[${YELLOW}⚡ tahioN VHOSTS ⚡${CYAN}]${NC}"
echo -e "${CYAN}║${NC}"
echo -e "${PRM}${YELLOW}⬢${NC} IPv4 ADDRESSES"
echo -e "${CYAN}║${NC}"

if [ -z "$ipv4_addresses" ]; then
    echo -e "${PRM}${GRAY}No IPv4 addresses found${NC}"
else
    for ip in $ipv4_addresses; do
        reverse_dns=$(get_reverse_dns "$ip")
        echo -e "${PRM}  ${GREEN}➜${NC} ${YELLOW}$ip${NC} - $reverse_dns"
    done
fi

echo -e "${CYAN}║${NC}"
echo -e "${PRM}${YELLOW}⬢${NC} IPv6 ADDRESSES"
echo -e "${CYAN}║${NC}"

if [ -z "$ipv6_addresses" ]; then
    echo -e "${PRM}${GRAY}No IPv6 addresses found${NC}"
else
    for ip in $ipv6_addresses; do
        reverse_dns=$(get_reverse_dns "$ip")
        echo -e "${PRM}  ${GREEN}➜${NC} ${YELLOW}$ip${NC} - $reverse_dns"
    done
fi

echo -e "${CYAN}║${NC}"
echo -e "${CYAN}╚═══════════════════[${GRAY}made with <3 kofany & yooz${CYAN}]${NC}"

exit 0
